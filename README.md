![revue](revue.png) 
# Revue Framework 

![Build Status](https://img.shields.io/static/v1?label=version&color=blueviolet&message=0.0.2-alpha&logo=data:image/svg+xml;base64,//48AHMAdgBnACAAeABtAGwAbgBzAD0AIgBoAHQAdABwADoALwAvAHcAdwB3AC4AdwAzAC4AbwByAGcALwAyADAAMAAwAC8AcwB2AGcAIgAgAHgAbQBsADoAcwBwAGEAYwBlAD0AIgBwAHIAZQBzAGUAcgB2AGUAIgAgAHYAZQByAHMAaQBvAG4APQAiADEALgAxACIAIABzAHQAeQBsAGUAPQAiAHMAaABhAHAAZQAtAHIAZQBuAGQAZQByAGkAbgBnADoAZwBlAG8AbQBlAHQAcgBpAGMAUAByAGUAYwBpAHMAaQBvAG4AOwAgAHQAZQB4AHQALQByAGUAbgBkAGUAcgBpAG4AZwA6AGcAZQBvAG0AZQB0AHIAaQBjAFAAcgBlAGMAaQBzAGkAbwBuADsAIABpAG0AYQBnAGUALQByAGUAbgBkAGUAcgBpAG4AZwA6AG8AcAB0AGkAbQBpAHoAZQBRAHUAYQBsAGkAdAB5ADsAIABmAGkAbABsAC0AcgB1AGwAZQA6AGUAdgBlAG4AbwBkAGQAOwAgAGMAbABpAHAALQByAHUAbABlADoAZQB2AGUAbgBvAGQAZAAiAA0ACgB2AGkAZQB3AEIAbwB4AD0AIgAwACAAMAAgADIAMgAwACAAMgAyADAAIgANAAoAIAB4AG0AbABuAHMAOgB4AGwAaQBuAGsAPQAiAGgAdAB0AHAAOgAvAC8AdwB3AHcALgB3ADMALgBvAHIAZwAvADEAOQA5ADkALwB4AGwAaQBuAGsAIgA+AA0ACgAgADwAZABlAGYAcwA+AA0ACgAgACAAPABzAHQAeQBsAGUAIAB0AHkAcABlAD0AIgB0AGUAeAB0AC8AYwBzAHMAIgA+AA0ACgAgACAAIAA8ACEAWwBDAEQAQQBUAEEAWwANAAoAIAAgACAAIAAuAGYAaQBsADAAIAB7AGYAaQBsAGwAOgAjADQARQA1AEUARQA0AH0ADQAKACAAIAAgACAALgBmAGkAbAAzACAAewBmAGkAbABsADoAIwA0AEUANQBFAEUANAB9AA0ACgAgACAAIAAgAC4AZgBpAGwAMQAgAHsAZgBpAGwAbAA6ACMANgAzAEIAMABGADkAfQANAAoAIAAgACAAIAAuAGYAaQBsADQAIAB7AGYAaQBsAGwAOgAjADYAMwBCADAARgA5AH0ADQAKACAAIAAgACAALgBmAGkAbAAyACAAewBmAGkAbABsADoAIwA2ADMARAAyAEYAOQB9AA0ACgAgACAAIAAgAC4AZgBpAGwANQAgAHsAZgBpAGwAbAA6ACMANgAzAEQAMgBGADkAfQANAAoAIAAgACAAXQBdAD4ADQAKACAAIAA8AC8AcwB0AHkAbABlAD4ADQAKACAAPAAvAGQAZQBmAHMAPgANAAoAIAA8AGcAIABpAGQAPQAiAEMAYQBtAGEAZABhAF8AeAAwADAAMgAwAF8AMQAiAD4ADQAKACAAIAA8AGcAIABpAGQAPQAiAF8AMgA1ADUAMgAzADAANwAzADkAOQAwADAAOAAiAD4ADQAKACAAIAAgADwAcABvAGwAeQBnAG8AbgAgAGMAbABhAHMAcwA9ACIAZgBpAGwAMAAiACAAcABvAGkAbgB0AHMAPQAiADIAMgAuADIALAA1ADkALgA1ACAANAA2AC4ANgA5ACwANwAzAC4ANgAgADQANgAuADYAOQAsADEANAA2AC4ANQAyACAAMQAxADAALgAxADkALAAxADgAMgAuADkAOAAgADEAMQAwAC4AMgA3ACwAMgAxADEALgAxADEAIAAyADIALgAwADcALAAxADYAMAAuADUAIAAiAC8APgANAAoAIAAgACAAPABwAG8AbAB5AGcAbwBuACAAYwBsAGEAcwBzAD0AIgBmAGkAbAAxACIAIABwAG8AaQBuAHQAcwA9ACIAMgAyAC4AMgAsADUAOQAuADUAIAAxADEAMAAuADIANwAsADgALgA2ADYAIAAxADkANwAuADgALAA1ADkALgA1ACAAMQA3ADMALgAzADMALAA3ADMALgA2ACAAMQAxADAALgAwADEALAAzADYALgA4ADUAIAA0ADYALgA2ADkALAA3ADMALgA2ACAAIgAvAD4ADQAKACAAIAAgADwAcABvAGwAeQBnAG8AbgAgAGMAbABhAHMAcwA9ACIAZgBpAGwAMgAiACAAcABvAGkAbgB0AHMAPQAiADEAMQAwAC4AMQA5ACwAMQA4ADIALgA5ADgAIAAxADEAMAAuADEAMwAsADIAMQAxAC4AMwA0ACAAMQA5ADcALgA4ACwAMQA2ADAALgAyADcAIAAxADkANwAuADkAMwAsADUAOQAuADIANwAgADEANwAzAC4AMwAzACwANwAzAC4ANgAgADEANwAzAC4ANgA4ACwAMQA0ADYALgA1ADIAIAAiAC8APgANAAoAIAAgACAAPABwAG8AbAB5AGcAbwBuACAAYwBsAGEAcwBzAD0AIgBmAGkAbAAzACIAIABwAG8AaQBuAHQAcwA9ACIANgAyAC4ANQAzACwAOAAyAC4ANQA5ACAAOAA5AC4AMgA3ACwAOQA4AC4AMAAyACAAOAA4AC4ANwA1ACwAMQA1ADIALgAyADIAIAA2ADIALgA1ADgALAAxADMANgAuADkAOAAgACIALwA+AA0ACgAgACAAIAA8AHAAbwBsAHkAZwBvAG4AIABjAGwAYQBzAHMAPQAiAGYAaQBsADQAIgAgAHAAbwBpAG4AdABzAD0AIgA4ADkALgAyADcALAA5ADgALgAwADIAIAAxADAAOQAuADgAOAAsADgANgAuADEAMgAgADEANQA3AC4AMAA4ACwAMQAxADMALgAzADcAIAAxADUANwAuADAAOAAsADgAMgAuADYAOQAgADEAMAA5AC4ANwAyACwANQA1AC4AMwA0ACAANgAyAC4ANQA4ACwAOAAyAC4ANgA5ACAAIgAvAD4ADQAKACAAIAAgADwAcABvAGwAeQBnAG8AbgAgAGMAbABhAHMAcwA9ACIAZgBpAGwAMwAiACAAcABvAGkAbgB0AHMAPQAiADEAMQAwAC4AMQAxACwAMQAxADAALgAwADUAIAAxADUANwAuADEANAAsADEAMwA3AC4AMAA4ACAAMQAzADMALgA3ADYALAAxADUAMAAuADUANwAgADEAMAA5AC4AOAA1ACwAMQAzADYALgA3ADcAIAAiAC8APgANAAoAIAAgACAAPABwAG8AbAB5AGcAbwBuACAAYwBsAGEAcwBzAD0AIgBmAGkAbAA1ACIAIABwAG8AaQBuAHQAcwA9ACIAMQAxADAALgAxADEALAAxADEAMAAuADAANQAgADEAMwAwAC4AMwA5ACwAOQA3AC4AOQAzACAAMQA1ADcALgAwADgALAAxADEAMwAuADMANwAgADEAMwA2AC4AMgAsADEAMgA1AC4AMAAzACAAIgAvAD4ADQAKACAAIAA8AC8AZwA+AA0ACgAgADwALwBnAD4ADQAKADwALwBzAHYAZwA+AA0ACgA=&style=platic&logoColor=white)  ![php version](https://img.shields.io/static/v1?label=php&message=%3E%3D%207&color=green&logo=php&style=platic&logoColor=white) ![vue version](https://img.shields.io/static/v1?label=vue.js&color=blue&message=3&logo=vue.js&style=platic&logoColor=white) ![license](https://img.shields.io/badge/licence-MIT-black)


With the renderings currently made on the frontend, I decided to create a micro framework to act on the backend of the application helping to assist in requests made by them.

This framework helps in the creation of applications whose objective is to "appear on google" since each page is rendered on the server side.

Revue is very simple to use. Enjoy!

-----------------------

# Index
  -  [Usage](#usage)
  -  [About Modules](#about-modules)
  -  [About Route](#about-route)
  -  [Module App](#module-app)
      -  [Route](#route)
      -  [Components](#components)
      -  [Controllers](#Tech)
      -  [Middlewares](#Tech)
  -  [Module API](#Tech)
     - [Route](#Tech)
     - [Controllers](#Tech)
     - [Middlewares](#Tech)
  -  [Service](#Tech)
  -  [Model](#Tech)
  -  [Public](#Tech)

-----------------------

# Usage

First of all you will need to configure the `conf.yaml` file.
This is the basic:

```yaml

  name:            project name 
  description:     project description
  version:         1.0.0
  production_url:  https://revue.net/
  development_url: http://localhost:8080/

```

If you are going to use the Model, you also need to configure the database:

```yaml

database:

  default:
    driver:  mysql
    host:    localhost
    dbname:  mydb
    user:    root
    pass:
    charset: utf8
    port:

```

# About Modules

Os módulos são partes da aplicação que atuam de forma independente. Eles são invocados através da url pelo `route.php` dele. Ou seja, todo módulo precisa ter no mínimo um arquivo `route.php` e um diretório `middleware`.

Seu ciclo de vida funciona da seguinte forma:

![revue life cycle](life-cycle.jpg) 

##### Start

- Cria o módulo e adiciona as rotas contiguradas

##### Before Config

- Se houver, chama um Middleware cadastrado.

##### Config

- Configura o módulo inserindo todos os arquivos necessários

##### Render

- Roda o componente e renderiza a resposta

# About Route

Todas as requisições via get são tratadas pela classe `Route` que conversa com a classe `Request`.

Para criar uma rota você deve registrá-la no arquivo `route.php` do módulo usado:

```php

  Route::req($regex, $target);

```

Para cada módulo usado, o `$target` pode significar um arquivo diferente. Por exemplo, no módulo App, o `$taget` significa um componente registrado, enquanto na API significa um `controller`

#### $regex

O `$regex` é usado para identificar as requisições via get pela URL. 

Exemplo:

```php
   
  Route::req('/home\/(user-list|contatos-list)/', 'main');

```

Na requisição acima, indica que para acessar o `target main` a URL pode ser de duas formas:

- `home/user-list`
- `home/contatos-list`

Se adicionarmos o quantificador opcional `?` teremos 3 modos de acesso.

Exemplo:

```php
   
  Route::req('/home\/?(user-list|contatos-list)?/', 'main');

```

- `home/user-list`
- `home/contatos-list`
- `home`

##### Recuperando Valores

Para recuperar valores via URL precisamos isolar o nome da variável entre chaves no `$regex`. Veja:

```php
   
  Route::req('/home\/{var_name}/', 'main');

```

E então essa variável ficará disponível em `Request::get('var_name')`.
Se adicionarmos o quantificador opcional `?`. Exemplo:

```php
   
  Route::req('/home\/?{var_name}?/', 'main');

```

O `Request::get('var_name')` poderá retornar `false`;